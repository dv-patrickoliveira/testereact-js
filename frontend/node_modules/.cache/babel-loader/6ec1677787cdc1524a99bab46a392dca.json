{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport { SynchronousPromise } from 'synchronous-promise';\nimport ValidationError from '../ValidationError';\n\nvar promise = function promise(sync) {\n  return sync ? SynchronousPromise : Promise;\n};\n\nvar unwrapError = function unwrapError(errors) {\n  if (errors === void 0) {\n    errors = [];\n  }\n\n  return errors.inner && errors.inner.length ? errors.inner : [].concat(errors);\n};\n\nfunction scopeToValue(promises, value, sync) {\n  //console.log('scopeToValue', promises, value)\n  var p = promise(sync).all(promises); //console.log('scopeToValue B', p)\n\n  var b = p.catch(function (err) {\n    if (err.name === 'ValidationError') err.value = value;\n    throw err;\n  }); //console.log('scopeToValue c', b)\n\n  var c = b.then(function () {\n    return value;\n  }); //console.log('scopeToValue d', c)\n\n  return c;\n}\n/**\n * If not failing on the first error, catch the errors\n * and collect them in an array\n */\n\n\nexport function propagateErrors(endEarly, errors) {\n  return endEarly ? null : function (err) {\n    errors.push(err);\n    return err.value;\n  };\n}\nexport function settled(promises, sync) {\n  var Promise = promise(sync);\n  return Promise.all(promises.map(function (p) {\n    return Promise.resolve(p).then(function (value) {\n      return {\n        fulfilled: true,\n        value: value\n      };\n    }, function (value) {\n      return {\n        fulfilled: false,\n        value: value\n      };\n    });\n  }));\n}\nexport function collectErrors(_ref) {\n  var validations = _ref.validations,\n      value = _ref.value,\n      path = _ref.path,\n      sync = _ref.sync,\n      errors = _ref.errors,\n      sort = _ref.sort;\n  errors = unwrapError(errors);\n  return settled(validations, sync).then(function (results) {\n    var nestedErrors = results.filter(function (r) {\n      return !r.fulfilled;\n    }).reduce(function (arr, _ref2) {\n      var error = _ref2.value; // we are only collecting validation errors\n\n      if (!ValidationError.isError(error)) {\n        throw error;\n      }\n\n      return arr.concat(error);\n    }, []);\n    if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n    errors = nestedErrors.concat(errors);\n    if (errors.length) throw new ValidationError(errors, value, path);\n    return value;\n  });\n}\nexport default function runValidations(_ref3) {\n  var endEarly = _ref3.endEarly,\n      options = _objectWithoutPropertiesLoose(_ref3, [\"endEarly\"]);\n\n  if (endEarly) return scopeToValue(options.validations, options.value, options.sync);\n  return collectErrors(options);\n}","map":{"version":3,"names":["_objectWithoutPropertiesLoose","SynchronousPromise","ValidationError","promise","sync","Promise","unwrapError","errors","inner","length","concat","scopeToValue","promises","value","p","all","b","catch","err","name","c","then","propagateErrors","endEarly","push","settled","map","resolve","fulfilled","collectErrors","_ref","validations","path","sort","results","nestedErrors","filter","r","reduce","arr","_ref2","error","isError","runValidations","_ref3","options"],"sources":["C:/Users/conta/Desktop/testereactjs/frontend/node_modules/yup/es/util/runValidations.js"],"sourcesContent":["import _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport { SynchronousPromise } from 'synchronous-promise';\nimport ValidationError from '../ValidationError';\n\nvar promise = function promise(sync) {\n  return sync ? SynchronousPromise : Promise;\n};\n\nvar unwrapError = function unwrapError(errors) {\n  if (errors === void 0) {\n    errors = [];\n  }\n\n  return errors.inner && errors.inner.length ? errors.inner : [].concat(errors);\n};\n\nfunction scopeToValue(promises, value, sync) {\n  //console.log('scopeToValue', promises, value)\n  var p = promise(sync).all(promises); //console.log('scopeToValue B', p)\n\n  var b = p.catch(function (err) {\n    if (err.name === 'ValidationError') err.value = value;\n    throw err;\n  }); //console.log('scopeToValue c', b)\n\n  var c = b.then(function () {\n    return value;\n  }); //console.log('scopeToValue d', c)\n\n  return c;\n}\n/**\n * If not failing on the first error, catch the errors\n * and collect them in an array\n */\n\n\nexport function propagateErrors(endEarly, errors) {\n  return endEarly ? null : function (err) {\n    errors.push(err);\n    return err.value;\n  };\n}\nexport function settled(promises, sync) {\n  var Promise = promise(sync);\n  return Promise.all(promises.map(function (p) {\n    return Promise.resolve(p).then(function (value) {\n      return {\n        fulfilled: true,\n        value: value\n      };\n    }, function (value) {\n      return {\n        fulfilled: false,\n        value: value\n      };\n    });\n  }));\n}\nexport function collectErrors(_ref) {\n  var validations = _ref.validations,\n      value = _ref.value,\n      path = _ref.path,\n      sync = _ref.sync,\n      errors = _ref.errors,\n      sort = _ref.sort;\n  errors = unwrapError(errors);\n  return settled(validations, sync).then(function (results) {\n    var nestedErrors = results.filter(function (r) {\n      return !r.fulfilled;\n    }).reduce(function (arr, _ref2) {\n      var error = _ref2.value;\n\n      // we are only collecting validation errors\n      if (!ValidationError.isError(error)) {\n        throw error;\n      }\n\n      return arr.concat(error);\n    }, []);\n    if (sort) nestedErrors.sort(sort); //show parent errors after the nested ones: name.first, name\n\n    errors = nestedErrors.concat(errors);\n    if (errors.length) throw new ValidationError(errors, value, path);\n    return value;\n  });\n}\nexport default function runValidations(_ref3) {\n  var endEarly = _ref3.endEarly,\n      options = _objectWithoutPropertiesLoose(_ref3, [\"endEarly\"]);\n\n  if (endEarly) return scopeToValue(options.validations, options.value, options.sync);\n  return collectErrors(options);\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}